<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog - Codebotiks</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@1.35.7/dist/umd/supabase.js"></script>
    <script>
        // Check if Supabase v1 loaded (it has a different API)
        setTimeout(() => {
            if (window.supabase && window.supabase.createClient) {
                window.dispatchEvent(new CustomEvent('supabaseReady'));
            } else {
                // Try loading v2 as ES module
                const script = document.createElement('script');
                script.type = 'module';
                script.innerHTML = `
                    import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
                    window.supabase = { createClient };
                    window.dispatchEvent(new CustomEvent('supabaseReady'));
                `;
                script.onerror = () => {
                    // Dispatch ready anyway so app doesn't hang
                    window.dispatchEvent(new CustomEvent('supabaseReady'));
                };
                document.head.appendChild(script);
            }
        }, 300);
    </script>
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="header-left">
                <div class="logo">
                    <h1>Code<span class="logo-accent">botiks</span></h1>
                    <span class="beta-tag">BETA</span>
                </div>
                <div class="tagline">
                    <span>AI-Powered Code Learning Platform</span>
                </div>
            </div>
            <div class="user-section">
                <div class="header-actions">
                    <span id="user-email" class="user-email" style="display: none;"></span>
                    <button id="auth-toggle-btn" class="btn btn-outline">Login</button>
                    <button id="menu-toggle" class="menu-toggle">
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                        <span class="hamburger-line"></span>
                    </button>
                </div>
                
                <!-- Navigation Menu -->
                <div id="nav-menu" class="nav-menu">
                    <div class="nav-content">
                        <div class="nav-section">
                            <h3>Navigation</h3>
                            <a href="/" class="nav-link">üè† Home</a>
                            <a href="/blog" class="nav-link active">üìù Blog</a>
                        </div>
                        
                        <div class="nav-section">
                            <h3>Progress</h3>
                            <button id="progress-btn" class="menu-btn">üìä View Progress</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="blog-main">
        <div class="blog-container">
            <div class="blog-header">
                <h1>Codebotiks Blog</h1>
                <p>Insights, tips, and updates from the world of AI-powered coding education</p>
            </div>
            
            <div id="blog-posts" class="blog-posts">
                <div class="loading">Loading blog posts...</div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="#" id="disclaimer-link">Disclaimer</a>
                <a href="#" id="contact-link">Contact Us</a>
            </div>
            <div class="footer-text">
                <p>&copy; 2025 Codebotiks. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Disclaimer Modal -->
    <div id="disclaimer-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Disclaimer</h2>
                <button class="close-btn" id="close-disclaimer-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="disclaimer-content">
                    <h3>Website Disclaimer</h3>
                    <p><strong>Educational Purpose:</strong> This website is provided for educational purposes only. The content, tools, and services are designed to help users learn programming concepts and improve their coding skills.</p>
                    
                    <h3>Code Usage and AI Training</h3>
                    <p><strong>Important Notice:</strong> Any code submitted, analyzed, or processed through this website may be used by OpenAI for training their AI models. By using our services, you consent to this usage. This arrangement allows us to receive free API credits from OpenAI, which helps us keep our educational platform free for all users.</p>
                    
                    <h3>No Warranty</h3>
                    <p>The information and services provided on this website are on an "as is" basis. We make no warranties, expressed or implied, and hereby disclaim all other warranties including implied warranties of merchantability, fitness for a particular purpose, or non-infringement.</p>
                    
                    <h3>Limitation of Liability</h3>
                    <p>In no event shall Codebotiks be liable for any damages arising from the use or inability to use this website or its services.</p>
                    
                    <h3>Privacy</h3>
                    <p>Please do not submit any personal, confidential, or proprietary information through our code analysis tools. Any code submitted should be considered public for learning purposes.</p>
                    
                    <p><em>By continuing to use this website, you acknowledge that you have read, understood, and agree to this disclaimer.</em></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contact-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Contact Us</h2>
                <button class="close-btn" id="close-contact-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="contact-form">
                    <div class="form-group">
                        <label for="contact-name">Name:</label>
                        <input type="text" id="contact-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-email">Email:</label>
                        <input type="email" id="contact-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-subject">Subject:</label>
                        <input type="text" id="contact-subject" name="subject" required>
                    </div>
                    <div class="form-group">
                        <label for="contact-message">Message:</label>
                        <textarea id="contact-message" name="message" rows="5" required></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn primary" id="contact-submit">Send Message</button>
                        <button type="button" class="btn" id="contact-cancel">Cancel</button>
                    </div>
                </form>
                <div id="contact-error" class="error" style="display: none;"></div>
                <div id="contact-result" class="contact-result"></div>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div id="auth-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="auth-title">Login to Track Progress</h2>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <form id="auth-form" method="POST">
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="password">Password:</label>
                        <input type="password" id="password" required>
                    </div>
                    <div class="form-actions">
                        <button type="submit" class="btn primary" id="auth-submit">Login</button>
                        <button type="button" class="btn secondary" id="toggle-auth">Need an account? Sign up</button>
                    </div>
                </form>
                <div id="auth-error" class="error" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Progress Modal -->
    <div id="progress-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Your Progress</h2>
                <button class="close-btn" id="close-progress-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="progress-stats" class="progress-stats">
                    <div class="stat-item">
                        <span class="stat-number" id="completed-count">0</span>
                        <span class="stat-label">Challenges Completed</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number" id="total-count">44</span>
                        <span class="stat-label">Total Challenges</span>
                    </div>
                </div>
                <div id="progress-list" class="progress-list">
                    <h3>Completed Challenges</h3>
                    <div id="completed-challenges"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Inject Supabase configuration
        window.SUPABASE_CONFIG = {
            url: '{{ supabase_url }}',
            anonKey: '{{ supabase_anon_key }}'
        };
    </script>
    <script src="{{ url_for('static', filename='js/auth.js') }}"></script>
    <script src="{{ url_for('static', filename='js/blog.js') }}"></script>
</body>
</html>